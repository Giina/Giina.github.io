

<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>楽圜</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon"/>
    
    <!-- stylesheets list from config.yml -->
    
    <link rel="stylesheet" href="/css/Mr.white.css">
    
    
</head>
<body>

<div id="content-outer">
    <div id="content-inner">
        <div class="post-container">
    <article id="post">
    <h1>精确ip定位接口实现
        <hr>
    </h1>
    <span class="date">2017-03-10</span>
    <div class="content markdown-body">
        <h3 id="精确IP定位的实现"><a href="#精确IP定位的实现" class="headerlink" title="精确IP定位的实现"></a>精确IP定位的实现</h3><p>从一个前端的角度想要实现精准IP定位，调用接口的时候势必会暴露自己的APPKey。等我发现这一点的时候我的APPKey其实已经暴露了好几个月，有点庆幸没有人抱着恶意访问网站。因此，精准IP定位的接口工作交给了后端的同事，API说明文档如下：</p>
<blockquote>
<p>ip_location:</p>
<p>直辖市请求接口： <a href="https://way.jd.com/RTBAsia/ip_district?ip=查询的IP地址&amp;appkey=RTBAisa购买所得APPKey" target="_blank" rel="external">https://way.jd.com/RTBAsia/ip_district?ip=查询的IP地址&amp;appkey=RTBAisa购买所得APPKey</a><br>接口说明文档地址：<a href="https://wx.jcloud.com/market/api/10366" target="_blank" rel="external">https://wx.jcloud.com/market/api/10366</a><br>注意：该地区返回行政区号需要查询行政区号字典，在浏览器中访问<a href="https://way.jd.com/RTBAsia/dictionary_district?appkey=c25bfe7445f025e295f73668687051cc" target="_blank" rel="external">https://way.jd.com/RTBAsia/dictionary_district?appkey=c25bfe7445f025e295f73668687051cc</a> 改地址能够得到字典内容，该接口说明文档为<a href="https://wx.jcloud.com/market/datas/18/10367" target="_blank" rel="external">https://wx.jcloud.com/market/datas/18/10367</a> </p>
<p>一般地址请求接口： <a href="http://restapi.amap.com/v3/ip?key=高德地图创建的接口APPKey&amp;ip=查询的IP地址" target="_blank" rel="external">http://restapi.amap.com/v3/ip?key=高德地图创建的接口APPKey&amp;ip=查询的IP地址</a><br>接口说明文档地址：<a href="http://lbs.amap.com/api/webservice/guide/api/ipconfig/#ip" target="_blank" rel="external">http://lbs.amap.com/api/webservice/guide/api/ipconfig/#ip</a></p>
<p>接口返回结果参数说明：</p>
</blockquote>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>示例值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>province</td>
<td>string</td>
<td>‘浙江省’/‘上海市’</td>
<td>省份/直辖市名称</td>
</tr>
<tr>
<td>city</td>
<td>string</td>
<td>‘杭州市’/‘杨浦区’</td>
<td>城市/区域名称</td>
</tr>
<tr>
<td>isMunicipality</td>
<td>boolean</td>
<td>True / False</td>
<td>是否是直辖市</td>
</tr>
<tr>
<td>status</td>
<td>int</td>
<td>返回结果状态值</td>
<td>值为0或1,0表示失败；1表示成功</td>
</tr>
<tr>
<td>info</td>
<td>string</td>
<td>返回状态说明</td>
<td>返回状态说明，status为0时，info返回错误原因，否则返回“OK”。</td>
</tr>
</tbody>
</table>

    </div>
    
    <br/>
    <hr>
    <div class="copyright">
    本作品采用<a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/">知识共享署名-非商业性使用-禁止演绎4.0 国际许可协议</a>进行许可。 <br>
    <a style="margin-top:20px;border-bottom: none" rel="license"
       href="http://creativecommons.org/licenses/by-nc-nd/4.0/"><img
                alt="知识共享许可协议" style="border-width:0"
                src="https://i.creativecommons.org/l/by-nc-nd/4.0/88x31.png"/></a>
</div>
    
</article>
    <hr>
    <nav id="pagination" class="menu">
    
    <a href="/zh/2017-02/2月bug/" title="2月bug" class="prev">&larr; next</a>
    

    <!-- 导航模块 -->

<nav id="menu">
    <a href="/" class="">Home</a>
    <a href="/archives" class="">Archives</a>
    <a href="/about" class="">About</a>
</nav>

    
    <a href="/zh/2017-02/用户场景分析/" title="用户场景分析" class="next">prev &rarr;</a>
    
</nav>
    <!-- 声明模块 -->
<P class="declaration">
    Copyright © 2016 by
    <a href="/about">Jane w. Gu</a>,&nbsp;&nbsp;Powered by
    <a href="http://hexo.io/" target="_blank">Hexo</a>,&nbsp;&nbsp;Theme inspired by
    <a href="https://github.com/geekplux/hexo-theme-typing" target="_blank">typing</a>
</P>
</div>
    </div>
</div>


<!-- scripts list from theme config.yml -->

<script src="/js/Mr.white.js"></script>



</body>
</html>
