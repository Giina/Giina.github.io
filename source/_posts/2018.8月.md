---
title: 2018.8月
lang: zh
date: 2018-08-13 10:16:56
tags:
category: "日常"
---

# 2018-08-30

### 1.ios weapp 中时间 Invalid Date
console.log('time:', new Date('2018-08-23 11:15:27 UTC').toString(), new Date('2018-08-28T02:14:46.317Z').toString())这行代码在ios端小程序打印出来是 time : Invalid Date Tue Aug 28 2018 10:14:46 GMT +0800(CST)

# 2018-08-24

### 1. npm install和npm i差别
发现npm install（新版）会生成package-lock.json

# 2018-08-21

### 1.后端传的二进制流到底要怎样才能直接显示呢？
```
responseType: 'arraybuffer'

vm.codeData = btoa(new Uint8Array(res.data).reduce((data, byte) => data + String.fromCharCode(byte), ''))
```
失败尝试：
1. 直接放入src
2. headers设置content-type（告诉服务器端传入的参数类型）
3. 二进制流转base64（blob）

成功原理：
1. ArrayBuffer是二进制数据
2. btoa() 函数能够从二进制数据“字符串”创建一个base-64编码的ASCII字符串。[Base64的编码与解码](https://developer.mozilla.org/zh-CN/docs/Web/API/WindowBase64/Base64_encoding_and_decoding)
![请求举例](https://upload-images.jianshu.io/upload_images/139609-052b0f5ae4e1aa2c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)


# 2018-08-20

### 1. chrome a标签 download属性，新窗口预览BUG（跨域也无法下载）

# 2018-08-12

# padding-top， margin-top， top 百分比时，基于哪个数据进行的计算？

# 2018-08-10

### 1. 三个时间取最大值应该用什么方法？如果是n个时间取最大值呢？

1. Array.sort()
2. Math.max()

解决方法：
```
new Date(Math.max(new Date(project.publishedAt || 0), new Date(project.updatedAt || 0), new Date((project.latestProgress && project.latestProgress.publishedAt) || 0)))
```